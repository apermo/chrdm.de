/**
 * Phase 10 Score Card - Frontend Styles
 */

@use '../../scss/variables' as *;
@use '../../scss/mixins' as *;

.asc-phase10 {
	@include block-wrapper;
	padding: $font-size-xl; // 1rem

	&__header {
		display: flex;
		align-items: center;
		gap: $font-size-xl;
		margin-bottom: $font-size-xl;
		flex-wrap: wrap;
	}

	&__title {
		margin: 0;
		font-size: $font-size-3xl;
	}

	&__status {
		padding: $spacing-xs $spacing-sm;
		border-radius: $border-radius-sm;
		font-size: $font-size-xs;
		font-weight: $font-weight-semibold;
		text-transform: uppercase;

		&--completed {
			background: $color-success-bg;
			color: $color-success-text;
		}
	}

	&__pending {
		@include pending-state;
		padding: $font-size-xl;
	}

	&__actions {
		display: flex;
		gap: $spacing-sm;
		margin-top: $font-size-xl;
		flex-wrap: wrap;
	}

	&__add-round-btn,
	&__edit-round-btn,
	&__complete-btn,
	&__edit-players-btn {
		@include btn-base;
		padding: $spacing-sm $font-size-xl;
		font-size: $font-size-base;
	}

	&__add-round-btn {
		background: $color-phase10;
		color: $color-bg-white;

		&:hover {
			background: $color-phase10-dark;
		}
	}

	&__edit-round-btn,
	&__edit-players-btn {
		@include btn-ghost;
	}

	&__complete-btn {
		background: $color-btn-success-wp;
		color: $color-bg-white;

		&:hover {
			background: $color-btn-success-wp-dark;
		}
	}

	&__player-actions {
		margin-top: $font-size-xl;
	}
}

// Display table
.asc-phase10-display {
	&__progress {
		margin: 0 0 $font-size-xl;
		font-weight: $font-weight-semibold;
		color: $color-text-secondary;
	}

	&__table-wrapper {
		overflow-x: auto;
		margin: 0 (-$font-size-xl);
		padding: 0 $font-size-xl;
	}

	&__table {
		width: 100%;
		border-collapse: collapse;
		font-size: $font-size-base;
		min-width: 300px;

		th,
		td {
			padding: $spacing-sm;
			text-align: center;
			border-bottom: 1px solid $color-table-border;
		}

		th {
			background: $color-bg-light;
			font-weight: $font-weight-semibold;
			white-space: nowrap;
		}

		tbody tr:hover {
			background: $color-bg-light;
		}
	}

	&__round-col {
		width: 60px;
	}

	&__round-num {
		font-weight: $font-weight-semibold;
		color: $color-text-secondary;
	}

	&__player-col {
		vertical-align: bottom;
		padding-bottom: $spacing-sm !important;

		@include responsive-sm {
			height: 100px;
			vertical-align: middle;
			padding: $spacing-xs !important;
		}
	}

	&__player-header {
		display: flex;
		align-items: center;
		justify-content: center;
		gap: $spacing-sm;

		@include responsive-sm {
			writing-mode: vertical-rl;
			transform: rotate(180deg);
			flex-direction: row-reverse;
			gap: $spacing-xs;
			height: 100%;
		}
	}

	&__player-name {
		white-space: nowrap;
	}

	&__header-avatar,
	&__avatar {
		@include avatar($avatar-sm);

		@include responsive-sm {
			width: 20px;
			height: 20px;
		}
	}

	&__player {
		@include player-display;
	}

	&__phase-row {
		td {
			background: $color-bg-light;
			border-bottom: 2px solid $color-table-border;
		}
	}

	&__phase-label {
		font-weight: $font-weight-semibold;
		color: $color-text-secondary;
		text-align: left !important;
	}

	&__phase-cell {
		padding: $spacing-sm !important;
	}

	&__phase-grid {
		display: flex;
		flex-wrap: wrap;
		gap: $spacing-xs;
		justify-content: center;

		@media (min-width: $breakpoint-sm) {
			max-width: 140px;
			margin: 0 auto;
		}

		@include responsive-sm {
			max-width: 60px;
			margin: 0 auto;
		}
	}

	&__phase {
		display: inline-flex;
		align-items: center;
		justify-content: center;
		width: $avatar-sm;
		height: $avatar-sm;
		font-size: $font-size-xs;
		font-weight: $font-weight-medium;
		color: $color-text-secondary;
		background: $color-bg-white;
		border: 1px solid $color-border-medium;
		border-radius: $border-radius-sm;

		&--completed {
			text-decoration: line-through;
			color: $color-text-muted;
			background: #e8e8e8;
			border-color: $color-border-dark;
		}

		&--current {
			color: $color-phase10;
			background: #e6f4fa;
			border-color: $color-phase10;
			font-weight: $font-weight-bold;
			box-shadow: 0 0 0 2px rgba(0, 124, 186, 0.2);
		}
	}

	&__score {
		position: relative;

		&--zero {
			.asc-phase10-display__points {
				color: $color-btn-success-wp;
				font-weight: $font-weight-semibold;
			}
		}

		&--phase-completed {
			background: $color-success-bg !important;

			.asc-phase10-display__points {
				color: $color-success-text;
				font-weight: $font-weight-semibold;
			}
		}
	}

	&__phase-completed-icon {
		color: $color-btn-success-wp;
		font-weight: bold;
		margin-right: $spacing-xs;
	}

	&__points {
		display: block;
	}

	&__total {
		display: block;
		font-size: $font-size-xs;
		color: $color-text-muted;
	}

	&__total-row {
		td {
			border-top: 2px solid $color-btn-secondary-text;
			background: $color-bg-light;
			font-weight: $font-weight-semibold;
		}
	}

	&__total-label {
		text-align: left !important;
	}

	&__total-score {
		&--position-1 {
			background: $color-warning-bg !important;
		}

		&--position-2 {
			background: #e8e8e8 !important;
		}

		&--position-3 {
			background: #f5e6d3 !important;
		}

		&--finished {
			position: relative;

			&::after {
				content: "âœ“";
				display: inline-block;
				margin-left: $spacing-xs;
				color: $color-btn-success-wp;
				font-size: $font-size-xs;
			}
		}
	}

	&__medal {
		margin-right: $spacing-xs;
	}
}

// Form styles
.asc-phase10-form {
	@include form-container;
	padding: $font-size-xl;

	&__title {
		margin: 0 0 $font-size-xl;
		font-size: $font-size-xl;
	}

	&__players {
		display: flex;
		flex-direction: column;
		gap: 0.75rem;
		margin-bottom: $font-size-xl;
	}

	&__player-row {
		@include form-player-row;
		gap: 0.75rem;
	}

	&__player-info {
		@include player-display;
		min-width: 120px;
		flex: 1;
	}

	&__player-avatar {
		@include avatar($avatar-md);
	}

	&__player-name {
		@include player-name;
	}

	&__player-phase {
		font-size: $font-size-xs;
		color: $color-phase10;
		background: #e6f4fa;
		padding: 0.125rem $spacing-sm;
		border-radius: 10px;
		font-weight: $font-weight-medium;
	}

	&__input-group {
		display: flex;
		align-items: center;
		gap: $spacing-sm;
		flex-wrap: wrap;
	}

	&__phase-completed-label {
		display: flex;
		align-items: center;
		gap: $spacing-xs;
		cursor: pointer;
		font-size: $font-size-base;
		white-space: nowrap;
	}

	&__phase-completed-checkbox {
		width: 18px;
		height: 18px;
		cursor: pointer;
	}

	&__phase-completed-text {
		color: $color-text-secondary;
	}

	&__phase-completed-checkbox:checked + &__phase-completed-text {
		color: $color-btn-success-wp;
		font-weight: $font-weight-medium;
	}

	&__input {
		width: 80px;
		padding: $spacing-sm;
		border: 1px solid $color-border-medium;
		border-radius: $border-radius-sm;
		font-size: $font-size-xl;
		text-align: center;

		&:focus {
			border-color: $color-phase10;
			outline: none;
			box-shadow: 0 0 0 1px $color-phase10;
		}

		&:disabled {
			background: $color-bg-medium;
			color: $color-text-muted;
			cursor: not-allowed;
		}
	}

	&__calc-btn {
		padding: $spacing-sm;
		background: $color-bg-medium;
		border: 1px solid $color-border-medium;
		border-radius: $border-radius-sm;
		cursor: pointer;
		font-size: $font-size-xl;
		line-height: 1;

		&:hover:not(:disabled) {
			background: $color-btn-secondary-hover;
		}

		&:disabled {
			opacity: 0.5;
			cursor: not-allowed;
		}
	}

	&__actions {
		display: flex;
		gap: $spacing-sm;
		margin-top: $font-size-xl;
	}

	&__save-btn,
	&__cancel-btn {
		@include btn-base;
		padding: $spacing-sm $font-size-xl;
		font-size: $font-size-base;
	}

	&__save-btn {
		background: $color-phase10;
		color: $color-bg-white;

		&:hover {
			background: $color-phase10-dark;
		}

		&:disabled {
			background: $color-border-dark;
		}
	}

	&__cancel-btn {
		@include btn-ghost;
	}
}

// Card calculator modal
.asc-phase10-calc {
	position: fixed;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	background: rgba(0, 0, 0, 0.5);
	display: flex;
	align-items: center;
	justify-content: center;
	z-index: $z-index-modal;
	padding: $font-size-xl;

	&__modal {
		background: $color-bg-white;
		border-radius: $border-radius-lg;
		max-width: 400px;
		width: 100%;
		max-height: 90vh;
		overflow-y: auto;
		box-shadow: $shadow-lg;
	}

	&__header {
		display: flex;
		align-items: center;
		justify-content: space-between;
		padding: $font-size-xl;
		border-bottom: 1px solid $color-table-border;
	}

	&__title {
		margin: 0;
		font-size: $font-size-xl;
	}

	&__close {
		background: none;
		border: none;
		font-size: $font-size-4xl;
		cursor: pointer;
		padding: 0;
		line-height: 1;
		color: $color-text-secondary;

		&:hover {
			color: $color-btn-secondary-text;
		}
	}

	&__body {
		padding: $font-size-xl;
	}

	&__card-types {
		display: flex;
		flex-direction: column;
		gap: 0.75rem;
	}

	&__card-row {
		display: flex;
		align-items: center;
		justify-content: space-between;
		gap: $font-size-xl;
	}

	&__card-label {
		flex: 1;
	}

	&__card-name {
		display: block;
		font-weight: $font-weight-medium;
	}

	&__card-points {
		display: block;
		font-size: $font-size-xs;
		color: $color-text-secondary;
	}

	&__card-input {
		width: 60px;
		padding: $spacing-sm;
		border: 1px solid $color-border-medium;
		border-radius: $border-radius-sm;
		font-size: $font-size-xl;
		text-align: center;

		&:focus {
			border-color: $color-phase10;
			outline: none;
		}
	}

	&__total {
		display: flex;
		align-items: center;
		justify-content: space-between;
		padding: $font-size-xl;
		background: $color-bg-light;
		border-radius: $border-radius-sm;
		margin-top: $font-size-xl;
		font-weight: $font-weight-semibold;
	}

	&__total-value {
		font-size: $font-size-3xl;
		color: $color-phase10;
	}

	&__footer {
		display: flex;
		gap: $spacing-sm;
		padding: $font-size-xl;
		border-top: 1px solid $color-table-border;
	}

	&__apply-btn,
	&__cancel-btn {
		flex: 1;
		@include btn-base;
		padding: 0.75rem $font-size-xl;
		font-size: $font-size-base;
	}

	&__apply-btn {
		background: $color-phase10;
		color: $color-bg-white;

		&:hover {
			background: $color-phase10-dark;
		}
	}

	&__cancel-btn {
		@include btn-ghost;
	}
}
